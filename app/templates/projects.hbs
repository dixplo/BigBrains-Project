<div class="ui segment"><h3>Projects List</h3>

  <div class="ui form">
    <div class="two fields">
      <div class="field">
        <label>Name</label>
        <Input @value={{name}} name="name" placeholder="Name" class="ui input"/>
      </div>
      <div class="field">
        <label>Description</label>
        <Input @value={{descriptif}} name="description" placeholder="Description" class="ui input"/>
      </div>
    </div>
      <div class="two fields">
      <div class="field">
        <label>Start date</label>
        <Input @value={{startDate}} type="date" name="dateT" placeholder="Y-M-D" class="ui input"/>
      </div>
      <div class="field">
        <label>Due date</label>
        <Input @value={{dueDate}} type="date" name="dateD" placeholder="Y-M-D" class="ui input"/>
      </div>
    </div>

    <div class="ui error message"></div>
    <div {{action "addNew" name descriptif startDate dueDate}} id="closeForm" class="ui submit green button">Add</div>
  </div> <!-- UI FORM -->

</div>

<div class="ui segment">
{{#each model as |project|}}

<table class="ui definition green table">
 <tbody>
   <tr>
     <td class="two wide column">Name</td>
     <td>{{project.name}}</td>
   </tr>
   <tr>
     <td>Description</td>
     <td>{{project.descriptif}}</td>
   </tr>
   <tr>
     <td>Start Date</td>
     <td>{{project.startDate}}</td>
   </tr>
   <tr>
     <td>Due Date</td>
     <td>{{project.dueDate}}</td>
   </tr>
   <tr>
     <td>Actions</td>
     <td>
       <div class="ui red button" {{action "confirmDelete" model project}}>Delete</div>
       <LinkTo class="ui green button" @route="projects.edit" @model={{project.id}}>Edit</LinkTo>
          <br>
          <br>
          {{outlet project.id}}

       <!--<div class="ui green button">Edit</div>-->
       <div class="ui green button" id="btnModalStory">Story</div>
     </td>
   </tr>
 </tbody>
</table>

   {{/each}}
</div>
 <!-- Valider la suppression -->
 <div class="ui modal delete">
   <div class="header">Do you want delete {{model.toDelete.name}} ?</div>
   <div class="content">
     <div class="description">
       <div class="actions">
        <div {{action "remove" model.toDelete}} class="ui green deny button">
              Yes
        </div>
        <div class="ui red deny button">
              No
        </div>
     </div>
   </div>
 </div>
</div>

<!-- Afficher les storys -->
<div class="ui modal story">
  <div class="header">Story</div>
  <div class="content">
    <div class="description">
      Affichage des Story.
    </div>
  </div>
</div>

<script>
$('#btnModalStory').click(function() {
  $('.ui.modal.story').modal('show');
})
$(".ui.modal.story").modal({
		closable: true
	});
  $(document).ready(function(){
                  $('.ui.form')
                      .form({
                          fields: {
                              name: {
                                  identifier: 'name',
                                  rules: [
                                      {
                                          type   : 'empty',
                                          prompt : 'Please enter the project name.'
                                      }
                                  ]
                              },
                              description: {
                                  identifier: 'description',
                                  rules: [
                                      {
                                          type   : 'empty',
                                          prompt : 'Please enter the project description.'
                                      }
                                  ]
                              },
                              startDate: {
                                  identifier: 'dateT',
                                  rules: [
                                      {
                                          type   : 'empty',
                                          prompt : 'Choose a start date of the project.'
                                      }
                                  ]
                              },
                              dueDate: {
                                  identifier: 'dateD',
                                  rules: [
                                      {
                                          type   : 'empty',
                                          prompt : 'Choose a start date of the project.'
                                      }
                                  ]
                              }
                          }
                      })
                  ;
              });
</script>

{{outlet}}
